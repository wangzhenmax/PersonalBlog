<?php view("comment.header")?>
<style>
  h1 {
    color: #eeff00
  }
</style>
<article>
  <!--banner begin-->
  <div class="picsbox">
    <div class="banner">
      <div id="banner" class="fader">
        <?php foreach($banner as $v):?>
        <li class="slide">
          <a href="/index/info?id=<?=$v['id']?>" target="_blank">
            <img src="<?=$v['cover_big']?>">
            <span class="imginfo">
              <?=$v['title']?>
            </span>
          </a>
        </li>
        <?php endforeach;?>
        <div class="fader_controls">
          <div class="page prev" data-target="prev">&lsaquo;</div>
          <div class="page next" data-target="next">&rsaquo;</div>
          <ul class="pager_list">
          </ul>
        </div>
      </div>
    </div>
    <!--banner end-->
    <div class="toppic">
      <li>
        <a href="#" target="_blank">
          <i>
            <img src="/images/baby.gif">
          </i>
          <h2>PersonalBlog 已运行(
            <span class="ttt"></span>)</h2>
          <span>访问量:(
            <span class="userLook"></span>) | 访问人数:(
            <span class="userNum"></span> )
          </span>
        </a>
      </li>
      <li>
        <a href="#" target="_blank">
          <i>
            <img src="/images/baby1.gif">
          </i>
          <h2>工作使我沉迷</h2>
          <span>学无止境</span>
        </a>
      </li>
    </div>
  </div>
  <div class="blank"></div>
  <!--blogsbox begin-->
  <div class="blogsbox">
    <?php foreach($data as $v){;?>
    <?php if($v['blog_img'] != null){; ?>
    <div class="blogs" data-scroll-reveal="enter bottom over 1s">
      <h3 class="blogtitle">
        <a href="/index/info?id=<?=$v['id']?>" target="_blank">
          <?=$v['title']?>
        </a>
      </h3>
      <span class="blogpic">
        <a href="/index/info?id=<?=$v['id']?>" title="">
          <img src="<?=$v['blog_img']?>" alt="假装有图片">
        </a>
      </span>
      <p class="blogtext">
        <?=$v['introduce']?>
      </p>
      <div class="bloginfo">
        <ul>
          <li class="author">
            宋东野结衣
          </li>
          <li class="lmname">
            <a href="/index/info?id=<?=$v['id']?>">
              <?=$v['blogType']?>
            </a>
          </li>
          <li class="timer">
            <?=substr($v['update_at'],0,10)?>
          </li>
          <li class="view">
            <span>
              <?=$v['look']?>
            </span>已阅读</li>
          <li class="like">
            <?=$v['likes']?>
          </li>
        </ul>
      </div>
    </div>
    <?php }elseif($v['cover_big']!=null){;?>
    <div class="blogs" data-scroll-reveal="enter bottom over 1s">
      <h3 class="blogtitle">
        <a href="/index/info?id=<?=$v['id']?>" target="_blank">
          <?=$v['title']?>
        </a>
      </h3>
      <span class="bigpic">
        <a href="/index/info?id=<?=$v['id']?>" title="">
          <img src="<?=$v['cover_big']?>" alt="假装有图片">
        </a>
      </span>
      <p class="blogtext">
        <?=$v['introduce']?>
      </p>
      <div class="bloginfo">
        <ul>
          <li class="author">宋东野结衣</li>
          <li class="lmname">
            <a href="/index/info?id=<?=$v['id']?>">
              <?=$v['blogType']?>
            </a>
          </li>
          <li class="timer">
            <?=substr($v['update_at'],0,10)?>
          </li>
          <li class="view">
            <span>
              <?=$v['look']?>
            </span>已阅读</li>
          <li class="like">
            <?=$v['likes']?>
          </li>
        </ul>
      </div>
    </div>

    <?php }elseif($v['cover_md']!=null){ ;?>

    <div class="blogs" data-scroll-reveal="enter bottom over 1s">
      <h3 class="blogtitle">
        <a href="/index/info?id=<?=$v['id']?>" target="_blank">
          <?=$v['title']?>
        </a>
      </h3>
      <span class="bplist">
        <a href="/index/info?id=<?=$v['id']?>" title="">
          <?php foreach($v['cover_md'] as $vs){;?>
          <li>
            <img src="<?=$vs?>" alt="假装有图片">
          </li>
          <?php };?>
        </a>
      </span>
      <p class="blogtext">
        <?=$v['introduce']?>
      </p>
      <div class="bloginfo">
        <ul>
          <li class="author">
            宋东野结衣
          </li>
          <li class="lmname">
            <a href="/index/info?id=<?=$v['id']?>">
              <?=$v['blogType']?>
            </a>
          </li>
          <li class="timer">
            <?=substr($v['update_at'],0,10)?>
          </li>
          <li class="view">
            <span>
              <?=$v['look']?>
            </span>已阅读</li>
          <li class="like">
            <?=$v['likes']?>
          </li>
        </ul>
      </div>
    </div>
    <?php } else {;?>
    <div class="blogs" data-scroll-reveal="enter bottom over 1s">
      <h3 class="blogtitle">
        <a href="/index/info?id=<?=$v['id']?>" target="_blank">
          <?=$v['title']?>
        </a>
      </h3>
      <p class="blogtext">
        <?=$v['introduce']?>
      </p>
      <div class="bloginfo">
        <ul>
          <li class="author">
            宋东野结衣
          </li>
          <li class="lmname">
            <a href="/index/info?id=<?=$v['id']?>">
              <?=$v['blogType']?>
            </a>
          </li>
          <li class="timer">
            <?=substr($v['update_at'],0,10)?>
          </li>
          <li class="view">
            <?=$v['look']?>已阅读</li>
          <li class="like">
            <?=$v['likes']?>
          </li>
        </ul>
      </div>
    </div>
    <?php } } ;?>
  </div>
  <!--blogsbox end-->
  <?=view("comment.sidebarHtml")?>
</article>
<?=view("comment.footer")?>
  <a href="#" class="cd-top">Top</a>
  </body>
  <script>
    function getlooknum() {
        $.ajax({
          url: "/admin/getLookNum",
          dataType: "json",
          success: function (res) {
            let look = document.querySelector(".userLook")
            let user = document.querySelector(".userNum")
            look.innerText = res.lookNum[0].num
            user.innerText = res.lookUser[0].num
          }
        });
      }
      getlooknum()
      var timestamp2 = Date.parse(new Date('2018-10-03'));
      function time() {
        var timestamp1 = Date.parse(new Date());
        let time = (timestamp1 - timestamp2)
        let timeNow = formatSeconds(time / 1000)
        let span = document.querySelector(".ttt")
        span.innerText = timeNow
      }
      setInterval("time()", 1000);
      function formatSeconds(value) {
        var secondTime = parseInt(value);// 秒
        var minuteTime = 0;// 分
        var hourTime = 0;// 小时
        if (secondTime < 59) {
          return result = secondTime + " 秒"
        } else if (secondTime > 59) {
          minuteTime = parseInt(secondTime / 60);
          secondTime = parseInt(secondTime % 60);
          hourTime = 0;
          if (minuteTime > 59) {
            // h
            hourTime = parseInt(minuteTime / 60);
            // m
            minuteTime = parseInt(minuteTime % 60);
            // S
            secondTime = parseInt(secondTime % 60);
          }
        }
        var result = "" + parseInt(secondTime) + " : ";
        if (minuteTime > 0) {
          result = parseInt(minuteTime) + " 分 " + secondTime + " 秒";
        }
        if (hourTime > 0) {
          result = parseInt(hourTime) + " 时 " + minuteTime + " 分 " + secondTime + " 秒";
          if (hourTime > 23) {
            day = parseInt(hourTime / 24);
            day = day < 10 ? "0" + day : day
            hourTime = parseInt(hourTime % 24);
            hourTime = hourTime < 10 ? "0" + hourTime : hourTime
            result = day + " 天 " + hourTime + " 时 " + minuteTime + " 分 " + secondTime + " 秒";
            if (day > 30) {
              let month = parseInt(day / 30)
              day = parseInt(day % 30)
              day = day < 10 ? "0" + day : day
              result = " " + month + " 月 " + day + " 天 " + hourTime + " 时 " + minuteTime + " 分 " + secondTime + " 秒";
              if (month > 12) {
                let yar = parseInt(month / 12)
                month = parseInt(month % 12)
                result = yar + " 年 " + month + " 月 " + day + " 天 " + hourTime + " 时 " + minuteTime + " 分 " + secondTime + " 秒";
              }
            }
          }
        }
        return result;
      }
    !function () {
      function o(w, v, i) {
        return w.getAttribute(v) || i
      } function j(i) {
        return document.getElementsByTagName(i)
      } function l() {
        var i = j("script"), w = i.length, v = i[w - 1]; return {
          l: w, z: o(v, "zIndex", -1), o: o(v, "opacity", 0.5), c: o(v, "color", "0,0,0"), n: o(v, "count", 99)
        }
      } function k() {
        r = u.width = window.innerWidth ||
          document.documentElement.clientWidth ||
          document.body.clientWidth, n = u.height = window.innerHeight ||
          document.documentElement.clientHeight ||
          document.body.clientHeight
      } function b() {
        e.clearRect(0, 0, r, n); var w = [f].concat(t); var x, v, A, B, z, y; t.forEach(function (i) {
          i.x += i.xa, i.y += i.ya, i.xa *= i.x > r ||
            i.x < 0 ? -1 : 1, i.ya *= i.y > n || i.y < 0 ? -1 : 1, e.fillRect(i.x - 0.5, i.y - 0.5, 1, 1);
          for (v = 0; v < w.length; v++) {
            x = w[v]; if (i !== x && null !== x.x && null !== x.y) {
              B = i.x - x.x, z = i.y - x.y, y = B * B + z * z; y < x.max && (x === f && y >= x.max / 2 && (i.x -= 0.03 * B, i.y -= 0.03 * z), A = (x.max - y) / x.max, e.beginPath(), e.lineWidth = A / 2, e.strokeStyle = "rgba(" + s.c + "," + (A + 0.2) + ")", e.moveTo(i.x, i.y), e.lineTo(x.x, x.y), e.stroke())
            }
          } w.splice(w.indexOf(i), 1)
        }), m(b)
      } var u = document.createElement("canvas"), s = l(), c = "c_n" + s.l, e = u.getContext("2d"), r, n, m = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (i) { window.setTimeout(i, 1000 / 45) }, a = Math.random, f = { x: null, y: null, max: 20000 }; u.id = c; u.style.cssText = "position:fixed;top:0;left:0;z-index:" + s.z + ";opacity:" + s.o; j("body")[0].appendChild(u); k(), window.onresize = k; window.onmousemove = function (i) { i = i || window.event, f.x = i.clientX, f.y = i.clientY }, window.onmouseout = function () { f.x = null, f.y = null }; for (var t = [], p = 0; s.n > p; p++) { var h = a() * r, g = a() * n, q = 2 * a() - 1, d = 2 * a() - 1; t.push({ x: h, y: g, xa: q, ya: d, max: 6000 }) } setTimeout(function () { b() }, 100)
    }();
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>

  </html>